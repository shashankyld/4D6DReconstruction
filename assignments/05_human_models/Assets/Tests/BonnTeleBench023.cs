using NUnit.Framework;
using UnityEngine;

public class BonnTeleBench023 : SMPLTest
{
    //[Test]
    public void TestInstantiator()
    {
        smplInstantiator.posePath = "bonn_tele_bench_023_single";
        GameObject[] instances = smplInstantiator.Run();
        Assert.That(instances?.Length, Is.EqualTo(1));
        GameObject instance = instances[0];

        float[] blendShapeValues = {
            00.00f, 19.35f, 32.81f, 00.00f, 16.82f, 00.00f, 00.00f, 09.37f, 00.00f, 01.98f, 00.00f, 10.30f, 01.79f, 00.00f, 14.70f, 00.00f, 00.35f, 00.00f, 19.69f, 00.00f,
            00.00f, 43.36f, 00.00f, 82.19f, 00.00f, 06.04f, 80.68f, 00.00f, 00.00f, 46.20f, 24.42f, 00.00f, 00.00f, 16.83f, 00.00f, 18.70f, 00.00f, 03.22f, 00.00f, 59.36f,
            86.36f, 00.00f, 29.85f, 00.00f, 00.00f, 73.05f, 00.00f, 88.92f, 67.39f, 00.00f, 54.88f, 00.00f, 00.00f, 49.19f, 00.00f, 32.41f, 00.00f, 00.41f, 08.93f, 00.00f,
            01.58f, 00.00f, 00.00f, 06.86f, 00.00f, 14.38f, 00.00f, 51.21f, 00.00f, 05.92f, 50.89f, 00.00f, 00.00f, 14.12f, 00.00f, 03.60f, 00.00f, 13.33f, 00.00f, 23.03f,
            09.60f, 00.00f, 00.00f, 01.86f, 00.00f, 16.62f, 24.81f, 00.00f, 13.81f, 00.00f, 00.00f, 04.12f, 00.00f, 06.80f, 10.49f, 00.00f, 34.70f, 00.00f, 05.07f, 00.00f,
            00.00f, 09.00f, 00.00f, 41.15f, 00.00f, 35.89f, 40.11f, 00.00f, 00.00f, 15.72f, 00.00f, 02.24f, 00.00f, 19.06f, 00.00f, 08.91f, 18.17f, 00.00f, 00.00f, 02.17f,
            00.00f, 09.94f, 10.61f, 00.00f, 08.10f, 00.00f, 00.00f, 00.89f, 00.00f, 05.82f, 32.10f, 00.00f, 09.96f, 00.00f, 00.00f, 31.70f, 00.00f, 05.31f, 00.00f, 05.41f,
            00.00f, 11.17f, 01.94f, 00.00f, 00.00f, 00.64f, 00.00f, 21.43f, 00.00f, 55.70f, 00.00f, 26.93f, 36.08f, 00.00f, 00.00f, 23.39f, 00.00f, 53.19f, 50.26f, 00.00f,
            32.08f, 00.00f, 00.00f, 19.72f, 00.00f, 00.90f, 00.00f, 11.32f, 00.00f, 07.09f, 12.06f, 00.00f, 00.00f, 01.35f, 11.04f, 00.00f, 05.74f, 00.00f, 00.00f, 11.80f,
            00.00f, 00.86f, 00.00f, 03.10f, 00.00f, 11.02f, 22.11f, 00.00f, 00.00f, 05.79f, 00.00f, 23.13f, 63.70f, 00.00f, 00.00f, 24.02f, 00.00f, 63.01f, 00.00f, 26.16f,
            00.00f, 14.55f, 51.68f, 00.00f, 05.31f, 00.00f, 00.00f, 51.67f, 00.00f, 14.40f, 00.00f, 01.69f, 00.00f, 05.42f, 00.00f, 01.30f, 00.00f, 00.16f, 00.00f, 09.49f,
            00.00f, 38.68f, 00.00f, 17.65f, 29.33f, 00.00f, 00.00f, 13.15f, 00.00f, 39.96f, 30.79f, 00.00f, 30.99f, 00.00f, 00.00f, 10.05f, 00.00f, 05.42f, 25.53f, 00.00f,
            00.00f, 20.08f, 00.00f, 24.05f, 00.00f, 03.41f, 09.54f, 00.00f, 21.83f, 00.00f, 00.00f, 04.19f, 00.00f, 02.50f, 00.00f, 03.83f, 00.00f, 23.98f, 13.25f, 00.00f,
            23.67f, 00.00f, 00.00f, 02.92f, 03.89f, 00.00f, 00.00f, 13.80f, 00.00f, 00.61f, 00.00f, 00.96f, 00.00f, 06.45f, 00.00f, 19.11f, 00.00f, 29.72f, 25.99f, 00.00f,
            00.00f, 05.80f, 21.22f, 00.00f, 23.94f, 00.00f, 00.00f, 27.58f, 00.00f, 06.91f, 00.00f, 42.67f, 56.16f, 00.00f, 00.00f, 59.66f, 00.00f, 74.51f, 00.00f, 33.98f,
            00.00f, 09.45f, 34.08f, 00.00f, 49.87f, 00.00f, 00.00f, 20.30f, 00.00f, 05.26f, 00.00f, 31.83f, 03.25f, 00.00f, 31.62f, 00.00f, 00.00f, 05.30f, 05.68f, 00.00f,
            00.00f, 04.89f, 00.00f, 04.36f, 00.00f, 00.21f, 00.00f, 117.59f, 00.00f, 34.87f, 00.00f, 92.06f, 00.00f, 04.75f, 00.00f, 06.29f, 00.00f, 34.59f, 98.33f, 00.00f,
            00.00f, 01.72f, 00.00f, 118.14f, 00.00f, 140.45f, 29.53f, 00.00f, 86.56f, 00.00f, 00.00f, 12.44f, 00.00f, 08.01f, 00.00f, 37.20f, 00.00f, 90.60f, 00.00f, 25.82f,
            00.00f, 133.54f, 00.00f, 12.04f, 00.00f, 47.19f, 06.00f, 00.00f, 45.36f, 00.00f, 00.00f, 20.60f, 00.00f, 40.46f, 14.33f, 00.00f, 38.31f, 00.00f, 00.00f, 08.75f,
            00.00f, 10.97f, 38.25f, 00.00f, 00.00f, 24.70f, 00.00f, 45.43f, 00.00f, 21.74f, 00.00f, 42.56f, 03.05f, 00.00f, 49.11f, 00.00f, 00.00f, 12.94f, 00.00f, 01.61f,
            06.95f, 00.00f, 00.00f, 16.47f, 00.00f, 07.77f, 00.00f, 00.40f, 00.00f, 04.39f, 16.10f, 00.00f, 05.59f, 00.00f, 00.00f, 01.46f, 00.00f, 05.55f, 00.00f, 14.89f,
            29.28f, 00.00f, 15.15f, 00.00f, 00.00f, 01.16f, 01.41f, 00.00f, 00.00f, 29.15f, 03.10f, 00.00f, 00.00f, 04.39f,
        };
        Vector3[] jointPositions = {
            new(-21.767f, 4.909f, 9.262f),
            new(-21.753f, 5.018f, 9.175f),
            new(-21.812f, 5.087f, 9.358f),
            new(-21.704f, 4.558f, 9.343f),
            new(-21.570f, 5.275f, 8.977f),
            new(-21.772f, 5.149f, 9.462f),
            new(-21.729f, 4.179f, 9.412f),
            new(-21.508f, 5.468f, 8.649f),
            new(-21.726f, 5.171f, 9.486f),
            new(-21.619f, 4.127f, 9.456f),
            new(-21.429f, 5.560f, 8.603f),
            new(-21.710f, 5.331f, 9.628f),
            new(-21.714f, 5.211f, 9.625f),
            new(-21.741f, 5.312f, 9.514f),
            new(-21.642f, 5.368f, 9.608f),
            new(-21.689f, 5.156f, 9.693f),
            new(-21.749f, 5.383f, 9.450f),
            new(-21.651f, 4.928f, 9.592f),
            new(-21.798f, 5.409f, 9.209f),
            new(-21.537f, 5.085f, 9.454f),
            new(-21.564f, 5.399f, 9.283f),
            new(-21.478f, 5.138f, 9.433f),
            new(-21.493f, 5.431f, 9.306f),
        };
        VerifyModel(instance, blendShapeValues, jointPositions);
    }


    //[Test]
    public void TestAverageInstantiator()
    {
        smplAverageInstantiator.posePath = "bonn_tele_bench_023_f00024";
        GameObject[] instances = smplAverageInstantiator.Run();
        Assert.That(instances?.Length, Is.EqualTo(1));
        GameObject instance = instances[0];

        float[] blendShapeValues = {
            00.00f, 10.80f, 24.82f, 00.00f, 16.62f, 00.00f, 00.77f, 00.00f, 02.59f, 00.00f, 00.00f, 10.96f, 00.00f, 00.78f, 15.74f, 00.00f, 02.67f, 00.00f, 18.30f, 00.00f,
            00.00f, 40.23f, 00.00f, 80.17f, 00.95f, 00.00f, 78.16f, 00.00f, 00.00f, 41.47f, 21.58f, 00.00f, 00.00f, 17.85f, 00.00f, 12.16f, 00.00f, 02.36f, 00.00f, 58.66f,
            84.80f, 00.00f, 33.17f, 00.00f, 00.00f, 66.43f, 00.00f, 96.83f, 74.68f, 00.00f, 62.27f, 00.00f, 00.00f, 52.91f, 00.00f, 42.36f, 00.00f, 00.12f, 04.14f, 00.00f,
            02.67f, 00.00f, 00.00f, 02.35f, 00.00f, 12.29f, 00.00f, 47.97f, 00.00f, 04.32f, 47.85f, 00.00f, 00.00f, 12.30f, 00.00f, 02.47f, 00.00f, 09.19f, 00.00f, 20.09f,
            05.90f, 00.00f, 00.00f, 01.53f, 00.00f, 16.42f, 21.29f, 00.00f, 14.83f, 00.00f, 00.00f, 03.42f, 00.00f, 01.64f, 00.82f, 00.00f, 18.03f, 00.00f, 07.00f, 00.00f,
            00.00f, 09.65f, 00.00f, 42.29f, 00.00f, 16.64f, 42.86f, 00.00f, 00.00f, 11.20f, 00.00f, 01.94f, 00.00f, 16.08f, 00.00f, 11.24f, 15.04f, 00.00f, 00.00f, 01.60f,
            00.00f, 09.56f, 12.60f, 00.00f, 07.68f, 00.00f, 00.00f, 01.10f, 00.00f, 04.58f, 23.94f, 00.00f, 17.93f, 00.00f, 00.00f, 24.29f, 00.00f, 03.00f, 00.00f, 00.24f,
            00.00f, 17.45f, 00.00f, 04.13f, 00.00f, 01.62f, 00.00f, 12.96f, 00.00f, 44.90f, 00.00f, 20.18f, 30.42f, 00.00f, 00.00f, 18.71f, 00.00f, 49.66f, 38.70f, 00.00f,
            37.09f, 00.00f, 00.00f, 15.58f, 00.00f, 00.38f, 00.00f, 08.73f, 00.00f, 00.64f, 08.75f, 00.00f, 00.00f, 00.78f, 08.89f, 00.00f, 00.00f, 00.14f, 00.00f, 08.91f,
            00.00f, 00.40f, 00.00f, 01.52f, 00.00f, 14.79f, 09.16f, 00.00f, 07.33f, 00.00f, 00.00f, 16.97f, 55.25f, 00.00f, 00.00f, 15.77f, 00.00f, 53.74f, 00.00f, 17.15f,
            00.00f, 08.76f, 40.70f, 00.00f, 04.40f, 00.00f, 00.00f, 40.48f, 00.00f, 08.70f, 00.00f, 05.12f, 00.00f, 06.10f, 02.89f, 00.00f, 00.00f, 00.23f, 00.00f, 04.57f,
            00.00f, 27.22f, 00.00f, 12.33f, 22.68f, 00.00f, 00.00f, 07.15f, 00.00f, 29.39f, 19.45f, 00.00f, 25.25f, 00.00f, 00.00f, 05.22f, 00.00f, 04.81f, 24.49f, 00.00f,
            00.00f, 18.39f, 00.00f, 22.83f, 00.00f, 03.23f, 10.72f, 00.00f, 20.42f, 00.00f, 00.00f, 06.01f, 00.00f, 02.29f, 00.00f, 04.93f, 00.00f, 25.23f, 18.02f, 00.00f,
            23.26f, 00.00f, 00.00f, 03.53f, 12.33f, 00.00f, 00.00f, 20.50f, 00.00f, 07.53f, 00.00f, 02.41f, 00.00f, 04.64f, 00.00f, 20.75f, 00.00f, 21.81f, 26.04f, 00.00f,
            00.00f, 06.80f, 25.21f, 00.00f, 15.09f, 00.00f, 00.00f, 29.72f, 00.00f, 05.72f, 00.00f, 33.02f, 58.56f, 00.00f, 00.00f, 45.66f, 00.00f, 71.04f, 00.00f, 31.57f,
            00.00f, 16.45f, 21.62f, 00.00f, 43.45f, 00.00f, 00.00f, 12.57f, 00.00f, 03.90f, 00.00f, 26.21f, 08.80f, 00.00f, 25.84f, 00.00f, 00.00f, 03.53f, 05.19f, 00.00f,
            00.00f, 09.85f, 00.00f, 02.72f, 00.00f, 00.52f, 00.00f, 113.75f, 00.00f, 38.72f, 00.00f, 91.17f, 00.00f, 02.32f, 00.00f, 07.86f, 00.00f, 38.78f, 99.02f, 00.00f,
            00.00f, 03.21f, 00.00f, 113.57f, 00.00f, 119.40f, 25.14f, 00.00f, 94.82f, 00.00f, 00.00f, 12.72f, 00.00f, 04.80f, 00.00f, 27.84f, 00.00f, 97.27f, 00.00f, 17.46f,
            00.00f, 115.27f, 00.00f, 12.05f, 00.00f, 47.19f, 06.23f, 00.00f, 45.14f, 00.00f, 00.00f, 21.47f, 00.00f, 42.36f, 15.10f, 00.00f, 40.07f, 00.00f, 00.00f, 09.63f,
            00.00f, 08.30f, 39.42f, 00.00f, 00.00f, 06.09f, 00.00f, 37.69f, 00.00f, 19.37f, 00.00f, 45.60f, 00.00f, 13.06f, 44.11f, 00.00f, 00.00f, 11.21f, 00.00f, 00.91f,
            04.73f, 00.00f, 00.00f, 12.57f, 00.00f, 04.51f, 00.00f, 00.12f, 01.99f, 00.00f, 12.65f, 00.00f, 00.00f, 01.41f, 00.00f, 00.81f, 00.00f, 04.34f, 00.00f, 13.24f,
            25.97f, 00.00f, 13.97f, 00.00f, 00.00f, 00.99f, 00.00f, 00.98f, 00.00f, 25.59f, 04.57f, 00.00f, 00.00f, 03.44f,
        };
        Vector3[] jointPositions = {
            new(-21.874f, 4.829f, 9.253f),
            new(-21.885f, 4.935f, 9.162f),
            new(-21.898f, 5.010f, 9.352f),
            new(-21.806f, 4.474f, 9.310f),
            new(-21.753f, 5.203f, 8.940f),
            new(-21.840f, 5.082f, 9.439f),
            new(-21.829f, 4.092f, 9.358f),
            new(-21.730f, 5.359f, 8.587f),
            new(-21.791f, 5.108f, 9.451f),
            new(-21.713f, 4.043f, 9.387f),
            new(-21.666f, 5.456f, 8.532f),
            new(-21.747f, 5.274f, 9.579f),
            new(-21.752f, 5.155f, 9.582f),
            new(-21.801f, 5.251f, 9.474f),
            new(-21.679f, 5.310f, 9.555f),
            new(-21.714f, 5.104f, 9.648f),
            new(-21.818f, 5.318f, 9.408f),
            new(-21.709f, 4.858f, 9.590f),
            new(-21.880f, 5.340f, 9.170f),
            new(-21.594f, 4.966f, 9.412f),
            new(-21.635f, 5.335f, 9.176f),
            new(-21.533f, 5.006f, 9.375f),
            new(-21.558f, 5.359f, 9.187f),
        };
        VerifyModel(instance, blendShapeValues, jointPositions);
    }


    //[Test]
    public void TestAnimationInstantiator()
    {
        smplAnimationInstantiator.posePath = "bonn_tele_bench_023_c0012";
        GameObject[] instances = smplAnimationInstantiator.Run();
        Assert.That(instances?.Length, Is.EqualTo(1));
        GameObject instance = instances[0];

        var interpolator = instance.GetComponent<SMPLInterpolator>();

        {
            float poseIndexF = 0.0f;
            interpolator.time = poseIndexF / interpolator.fps;
            interpolator.Update();

            float[] blendShapeValues = {
                00.00f, 16.34f, 13.64f, 00.00f, 25.26f, 00.00f, 07.18f, 00.00f, 00.00f, 03.70f, 00.00f, 02.86f, 01.69f, 00.00f, 13.44f, 00.00f, 03.27f, 00.00f, 19.31f, 00.00f,
                00.00f, 03.02f, 00.00f, 24.35f, 00.00f, 01.20f, 23.23f, 00.00f, 00.00f, 09.19f, 34.85f, 00.00f, 00.00f, 07.40f, 00.00f, 34.08f, 00.00f, 06.28f, 00.00f, 02.50f,
                11.93f, 00.00f, 00.00f, 18.74f, 00.00f, 13.05f, 00.00f, 00.97f, 00.00f, 04.83f, 17.98f, 00.00f, 07.15f, 00.00f, 00.00f, 01.89f, 00.00f, 00.43f, 00.00f, 01.36f,
                09.21f, 00.00f, 02.84f, 00.00f, 00.00f, 01.35f, 00.00f, 16.14f, 00.00f, 08.86f, 16.33f, 00.00f, 00.00f, 01.74f, 00.00f, 00.58f, 00.10f, 00.00f, 10.71f, 00.00f,
                00.98f, 00.00f, 00.00f, 00.51f, 00.00f, 10.05f, 00.00f, 10.67f, 10.09f, 00.00f, 00.00f, 01.08f, 00.00f, 00.01f, 00.00f, 01.10f, 00.40f, 00.00f, 01.14f, 00.00f,
                00.00f, 00.49f, 00.00f, 09.77f, 00.00f, 00.29f, 09.78f, 00.00f, 00.00f, 00.48f, 00.00f, 00.36f, 00.00f, 01.32f, 00.00f, 08.32f, 01.62f, 00.00f, 00.00f, 00.08f,
                03.57f, 00.00f, 08.27f, 00.00f, 00.00f, 03.69f, 00.00f, 00.41f, 00.00f, 00.26f, 06.73f, 00.00f, 00.00f, 02.71f, 00.00f, 07.23f, 00.00f, 04.69f, 00.00f, 29.39f,
                00.61f, 00.00f, 29.51f, 00.00f, 00.00f, 04.45f, 00.00f, 03.01f, 00.00f, 21.07f, 00.00f, 12.19f, 22.43f, 00.00f, 00.00f, 03.19f, 11.13f, 00.00f, 09.45f, 00.00f,
                00.00f, 13.52f, 00.00f, 01.37f, 00.00f, 00.10f, 00.20f, 00.00f, 04.52f, 00.00f, 00.00f, 00.16f, 00.00f, 00.00f, 00.00f, 00.90f, 00.00f, 04.52f, 00.89f, 00.00f,
                00.00f, 00.11f, 00.00f, 10.64f, 00.00f, 37.85f, 24.13f, 00.00f, 24.85f, 00.00f, 00.00f, 13.52f, 43.63f, 00.00f, 00.00f, 37.38f, 00.00f, 32.99f, 00.00f, 13.32f,
                00.00f, 02.67f, 16.18f, 00.00f, 16.29f, 00.00f, 00.00f, 11.64f, 00.00f, 04.06f, 00.00f, 25.70f, 00.00f, 19.79f, 23.12f, 00.00f, 00.00f, 04.74f, 00.00f, 00.61f,
                10.34f, 00.00f, 03.74f, 00.00f, 00.00f, 10.20f, 00.00f, 00.59f, 00.00f, 03.77f, 00.00f, 04.10f, 03.36f, 00.00f, 00.00f, 00.14f, 00.00f, 01.59f, 17.74f, 00.00f,
                00.00f, 00.58f, 00.00f, 17.23f, 00.00f, 03.73f, 20.85f, 00.00f, 04.26f, 00.00f, 00.00f, 20.42f, 00.00f, 02.20f, 00.00f, 03.01f, 00.00f, 22.01f, 10.42f, 00.00f,
                22.21f, 00.00f, 00.00f, 02.50f, 00.00f, 00.78f, 00.00f, 09.99f, 03.07f, 00.00f, 00.00f, 00.55f, 00.00f, 03.51f, 00.51f, 00.00f, 26.25f, 00.00f, 01.87f, 00.00f,
                00.00f, 00.41f, 00.00f, 08.82f, 00.00f, 26.18f, 09.00f, 00.00f, 00.00f, 03.91f, 00.00f, 44.70f, 65.66f, 00.00f, 00.00f, 51.29f, 00.00f, 70.31f, 00.00f, 30.20f,
                13.55f, 00.00f, 44.70f, 00.00f, 28.57f, 00.00f, 00.00f, 15.23f, 00.00f, 46.11f, 00.00f, 76.46f, 35.36f, 00.00f, 81.48f, 00.00f, 00.00f, 42.04f, 01.15f, 00.00f,
                00.00f, 21.37f, 28.20f, 00.00f, 00.00f, 06.47f, 00.00f, 112.05f, 00.00f, 35.20f, 00.00f, 92.82f, 38.99f, 00.00f, 00.00f, 15.69f, 00.00f, 37.03f, 91.29f, 00.00f,
                00.00f, 40.66f, 00.00f, 96.44f, 00.00f, 109.22f, 33.71f, 00.00f, 93.69f, 00.00f, 04.30f, 00.00f, 00.00f, 05.86f, 00.00f, 33.45f, 00.00f, 99.48f, 00.94f, 00.00f,
                00.00f, 110.13f, 00.00f, 04.48f, 00.00f, 25.33f, 15.29f, 00.00f, 28.92f, 00.00f, 00.00f, 09.19f, 00.00f, 30.27f, 00.00f, 06.22f, 33.34f, 00.00f, 00.00f, 05.93f,
                00.00f, 05.21f, 13.86f, 00.00f, 28.69f, 00.00f, 00.00f, 06.95f, 00.00f, 03.13f, 00.00f, 23.82f, 00.00f, 31.09f, 20.59f, 00.00f, 00.00f, 07.21f, 00.00f, 03.88f,
                21.50f, 00.00f, 00.00f, 17.28f, 00.00f, 15.82f, 00.00f, 05.71f, 29.33f, 00.00f, 22.60f, 00.00f, 00.00f, 25.46f, 00.00f, 05.97f, 00.00f, 30.74f, 00.00f, 58.56f,
                42.13f, 00.00f, 26.44f, 00.00f, 00.00f, 25.06f, 60.70f, 00.00f, 00.00f, 67.12f, 00.00f, 30.90f, 00.00f, 32.62f,
            };
            Vector3[] jointPositions = {
                new(-21.880f, 4.869f, 9.694f),
                new(-22.020f, 4.868f, 9.695f),
                new(-21.955f, 5.062f, 9.689f),
                new(-21.761f, 4.533f, 9.613f),
                new(-22.093f, 4.513f, 9.780f),
                new(-21.955f, 5.185f, 9.656f),
                new(-21.683f, 4.155f, 9.599f),
                new(-22.099f, 4.154f, 9.923f),
                new(-21.956f, 5.226f, 9.617f),
                new(-21.637f, 4.091f, 9.497f),
                new(-22.154f, 4.092f, 9.825f),
                new(-21.968f, 5.440f, 9.614f),
                new(-21.886f, 5.353f, 9.625f),
                new(-22.039f, 5.345f, 9.628f),
                new(-21.957f, 5.485f, 9.549f),
                new(-21.798f, 5.373f, 9.632f),
                new(-22.134f, 5.352f, 9.623f),
                new(-21.678f, 5.164f, 9.556f),
                new(-22.200f, 5.115f, 9.644f),
                new(-21.720f, 5.285f, 9.355f),
                new(-22.081f, 5.107f, 9.430f),
                new(-21.709f, 5.324f, 9.285f),
                new(-22.033f, 5.115f, 9.364f),
            };
            VerifyModel(instance, blendShapeValues, jointPositions);
        }

        {
            float poseIndexF = 24.0f;
            interpolator.time = poseIndexF / interpolator.fps;
            interpolator.Update();

            float[] blendShapeValues = {
                00.00f, 19.59f, 33.12f, 00.00f, 17.23f, 00.00f, 00.00f, 08.19f, 00.00f, 01.56f, 00.00f, 10.64f, 02.79f, 00.00f, 13.38f, 00.00f, 00.08f, 00.00f, 19.97f, 00.00f,
                00.00f, 45.60f, 00.00f, 82.87f, 00.00f, 13.20f, 81.47f, 00.00f, 00.00f, 51.62f, 31.98f, 00.00f, 00.00f, 20.11f, 00.00f, 28.15f, 00.00f, 06.18f, 00.00f, 69.39f,
                91.94f, 00.00f, 24.70f, 00.00f, 00.00f, 78.07f, 00.00f, 90.60f, 61.78f, 00.00f, 54.48f, 00.00f, 00.00f, 38.19f, 00.00f, 25.34f, 00.00f, 00.65f, 10.53f, 00.00f,
                04.39f, 00.00f, 00.00f, 06.87f, 00.00f, 14.04f, 00.00f, 50.64f, 00.00f, 09.10f, 50.00f, 00.00f, 00.00f, 13.88f, 00.00f, 02.80f, 00.00f, 12.39f, 00.00f, 19.96f,
                08.81f, 00.00f, 00.00f, 02.02f, 00.00f, 17.92f, 21.78f, 00.00f, 15.66f, 00.00f, 00.00f, 03.67f, 00.00f, 13.49f, 15.25f, 00.00f, 47.78f, 00.00f, 04.77f, 00.00f,
                00.00f, 07.67f, 00.00f, 38.11f, 00.00f, 49.93f, 35.24f, 00.00f, 00.00f, 20.85f, 00.00f, 02.35f, 00.00f, 19.20f, 00.00f, 09.80f, 18.81f, 00.00f, 00.00f, 01.90f,
                00.00f, 04.76f, 10.53f, 00.00f, 02.81f, 00.00f, 00.00f, 00.60f, 00.00f, 05.33f, 31.08f, 00.00f, 08.51f, 00.00f, 00.00f, 30.79f, 00.00f, 04.97f, 00.00f, 04.56f,
                00.00f, 09.50f, 01.70f, 00.00f, 00.00f, 00.47f, 00.00f, 25.33f, 00.00f, 60.92f, 00.00f, 26.72f, 37.21f, 00.00f, 00.00f, 28.45f, 00.00f, 59.13f, 55.14f, 00.00f,
                34.21f, 00.00f, 00.00f, 23.91f, 00.00f, 00.93f, 00.00f, 11.93f, 00.00f, 06.49f, 12.47f, 00.00f, 00.00f, 01.17f, 08.78f, 00.00f, 05.36f, 00.00f, 00.00f, 09.50f,
                00.00f, 00.60f, 00.00f, 02.77f, 00.00f, 07.47f, 22.14f, 00.00f, 00.00f, 08.85f, 00.00f, 24.08f, 64.48f, 00.00f, 00.00f, 21.63f, 00.00f, 64.66f, 00.00f, 26.84f,
                00.00f, 15.27f, 52.68f, 00.00f, 06.75f, 00.00f, 00.00f, 52.69f, 00.00f, 15.03f, 00.00f, 01.73f, 00.00f, 06.65f, 00.00f, 02.09f, 00.00f, 00.24f, 00.00f, 10.46f,
                00.00f, 40.69f, 00.00f, 18.08f, 31.68f, 00.00f, 00.00f, 13.25f, 00.00f, 38.35f, 31.28f, 00.00f, 28.61f, 00.00f, 00.00f, 09.43f, 00.00f, 06.27f, 27.26f, 00.00f,
                00.00f, 21.70f, 00.00f, 25.36f, 00.00f, 03.92f, 11.18f, 00.00f, 23.90f, 00.00f, 00.00f, 04.97f, 00.00f, 03.03f, 00.00f, 04.55f, 00.00f, 26.79f, 13.11f, 00.00f,
                26.26f, 00.00f, 00.00f, 03.68f, 05.70f, 00.00f, 00.00f, 14.15f, 00.00f, 02.00f, 00.00f, 01.03f, 00.00f, 07.23f, 00.00f, 18.04f, 00.00f, 32.68f, 26.50f, 00.00f,
                00.00f, 06.51f, 23.63f, 00.00f, 26.29f, 00.00f, 00.00f, 30.58f, 00.00f, 08.49f, 00.00f, 42.02f, 54.51f, 00.00f, 00.00f, 60.55f, 00.00f, 73.23f, 00.00f, 32.55f,
                00.00f, 09.40f, 35.72f, 00.00f, 49.79f, 00.00f, 00.00f, 20.97f, 00.00f, 03.83f, 00.00f, 27.36f, 00.00f, 01.61f, 27.41f, 00.00f, 00.00f, 03.97f, 05.25f, 00.00f,
                00.11f, 00.00f, 00.00f, 05.49f, 00.00f, 00.15f, 00.00f, 120.26f, 00.00f, 36.40f, 00.00f, 90.91f, 00.00f, 03.82f, 00.00f, 06.94f, 00.00f, 36.41f, 97.85f, 00.00f,
                00.00f, 03.91f, 00.00f, 120.24f, 00.00f, 143.92f, 28.86f, 00.00f, 85.07f, 00.00f, 00.00f, 15.04f, 00.00f, 09.00f, 00.00f, 38.64f, 00.00f, 88.57f, 00.00f, 29.77f,
                00.00f, 135.63f, 00.00f, 15.63f, 00.00f, 52.99f, 08.64f, 00.00f, 51.47f, 00.00f, 00.00f, 24.74f, 00.00f, 41.07f, 15.26f, 00.00f, 39.09f, 00.00f, 00.00f, 09.23f,
                00.00f, 15.07f, 48.27f, 00.00f, 00.00f, 21.39f, 00.00f, 52.75f, 00.00f, 24.10f, 00.00f, 38.17f, 00.00f, 02.19f, 43.70f, 00.00f, 00.00f, 10.08f, 00.00f, 01.53f,
                07.76f, 00.00f, 00.00f, 15.60f, 00.00f, 08.58f, 00.00f, 00.48f, 00.00f, 04.63f, 15.17f, 00.00f, 05.89f, 00.00f, 00.00f, 01.33f, 00.00f, 06.09f, 00.00f, 14.95f,
                30.94f, 00.00f, 15.83f, 00.00f, 00.00f, 01.26f, 00.00f, 00.31f, 00.00f, 30.51f, 05.19f, 00.00f, 00.00f, 04.91f,
            };
            Vector3[] jointPositions = {
                new(-21.754f, 4.910f, 9.248f),
                new(-21.734f, 5.019f, 9.162f),
                new(-21.785f, 5.089f, 9.347f),
                new(-21.682f, 4.564f, 9.343f),
                new(-21.576f, 5.286f, 8.955f),
                new(-21.741f, 5.144f, 9.453f),
                new(-21.703f, 4.187f, 9.421f),
                new(-21.557f, 5.522f, 8.650f),
                new(-21.695f, 5.163f, 9.480f),
                new(-21.594f, 4.139f, 9.470f),
                new(-21.484f, 5.612f, 8.594f),
                new(-21.673f, 5.321f, 9.624f),
                new(-21.686f, 5.202f, 9.619f),
                new(-21.702f, 5.306f, 9.509f),
                new(-21.603f, 5.355f, 9.606f),
                new(-21.666f, 5.144f, 9.687f),
                new(-21.704f, 5.376f, 9.444f),
                new(-21.631f, 4.917f, 9.581f),
                new(-21.750f, 5.413f, 9.204f),
                new(-21.507f, 5.078f, 9.457f),
                new(-21.520f, 5.396f, 9.287f),
                new(-21.446f, 5.131f, 9.447f),
                new(-21.454f, 5.429f, 9.321f),
            };
            VerifyModel(instance, blendShapeValues, jointPositions);
        }

        {
            float poseIndexF = 5.8f;
            interpolator.time = poseIndexF / interpolator.fps;
            interpolator.Update();

            float[] blendShapeValues = {
                00.00f, 15.13f, 16.89f, 00.00f, 24.58f, 00.00f, 10.32f, 00.00f, 00.00f, 01.28f, 00.00f, 05.74f, 00.00f, 03.62f, 15.98f, 00.00f, 03.91f, 00.00f, 14.17f, 00.00f,
                00.00f, 02.23f, 00.00f, 19.65f, 00.00f, 07.43f, 20.80f, 00.00f, 00.00f, 14.28f, 47.10f, 00.00f, 00.00f, 02.89f, 00.00f, 47.60f, 00.00f, 12.10f, 00.00f, 03.11f,
                13.88f, 00.00f, 00.00f, 20.51f, 00.00f, 15.46f, 00.00f, 01.40f, 00.00f, 06.28f, 19.35f, 00.00f, 09.25f, 00.00f, 00.00f, 02.33f, 00.00f, 00.74f, 00.00f, 01.34f,
                12.06f, 00.00f, 03.85f, 00.00f, 00.00f, 02.28f, 00.00f, 20.88f, 00.00f, 11.50f, 21.19f, 00.00f, 00.00f, 02.95f, 00.00f, 00.84f, 06.07f, 00.00f, 11.39f, 00.00f,
                00.00f, 02.26f, 00.00f, 04.96f, 00.00f, 31.03f, 00.00f, 12.71f, 30.51f, 00.00f, 00.00f, 05.62f, 00.00f, 00.04f, 00.00f, 01.20f, 02.49f, 00.00f, 01.42f, 00.00f,
                00.00f, 00.40f, 00.00f, 08.82f, 00.00f, 02.37f, 08.85f, 00.00f, 00.00f, 00.42f, 00.00f, 00.29f, 00.00f, 00.03f, 00.00f, 07.64f, 00.61f, 00.00f, 00.00f, 00.29f,
                07.58f, 00.00f, 07.62f, 00.00f, 00.00f, 07.60f, 00.00f, 00.58f, 00.00f, 00.29f, 07.26f, 00.00f, 00.00f, 02.32f, 00.00f, 07.55f, 00.00f, 01.87f, 00.00f, 17.70f,
                00.99f, 00.00f, 17.82f, 00.00f, 00.00f, 01.61f, 00.00f, 04.58f, 00.00f, 22.85f, 00.00f, 19.30f, 25.42f, 00.00f, 00.00f, 04.04f, 12.06f, 00.00f, 15.76f, 00.00f,
                00.00f, 16.41f, 00.00f, 02.62f, 00.00f, 00.20f, 00.00f, 00.04f, 06.28f, 00.00f, 00.29f, 00.00f, 00.00f, 00.08f, 00.00f, 04.04f, 00.00f, 06.28f, 04.05f, 00.00f,
                00.00f, 00.28f, 00.00f, 14.98f, 00.00f, 51.87f, 08.99f, 00.00f, 41.07f, 00.00f, 00.00f, 23.96f, 50.31f, 00.00f, 00.00f, 32.93f, 00.00f, 39.08f, 00.00f, 14.04f,
                00.00f, 04.71f, 16.79f, 00.00f, 25.27f, 00.00f, 00.00f, 12.10f, 00.00f, 02.59f, 00.00f, 19.10f, 00.00f, 27.82f, 15.14f, 00.00f, 00.00f, 05.15f, 00.00f, 00.28f,
                07.52f, 00.00f, 00.06f, 00.00f, 00.00f, 07.49f, 00.00f, 00.72f, 09.33f, 00.00f, 00.64f, 00.00f, 00.00f, 09.31f, 00.00f, 00.44f, 00.00f, 00.93f, 12.50f, 00.00f,
                00.00f, 05.43f, 00.00f, 10.79f, 00.00f, 03.72f, 24.76f, 00.00f, 08.32f, 00.00f, 00.00f, 23.94f, 00.00f, 03.27f, 00.00f, 04.51f, 00.00f, 19.88f, 22.07f, 00.00f,
                18.89f, 00.00f, 00.00f, 02.02f, 06.51f, 00.00f, 00.00f, 22.92f, 00.00f, 02.04f, 00.00f, 02.68f, 00.00f, 03.39f, 03.83f, 00.00f, 25.54f, 00.00f, 00.00f, 02.41f,
                00.00f, 00.20f, 00.00f, 05.85f, 00.00f, 25.71f, 05.04f, 00.00f, 00.00f, 03.49f, 00.00f, 50.14f, 68.65f, 00.00f, 00.00f, 52.92f, 00.00f, 73.92f, 00.00f, 34.43f,
                15.40f, 00.00f, 45.27f, 00.00f, 31.44f, 00.00f, 00.00f, 16.56f, 00.00f, 52.52f, 00.00f, 75.66f, 44.97f, 00.00f, 80.40f, 00.00f, 00.00f, 41.93f, 12.81f, 00.00f,
                00.00f, 35.80f, 30.07f, 00.00f, 00.00f, 11.60f, 00.00f, 114.52f, 00.00f, 37.51f, 00.00f, 91.56f, 34.30f, 00.00f, 00.00f, 15.11f, 00.00f, 40.22f, 92.80f, 00.00f,
                00.00f, 37.25f, 00.00f, 99.46f, 00.00f, 112.01f, 36.05f, 00.00f, 92.50f, 00.00f, 00.00f, 02.77f, 00.00f, 06.98f, 00.00f, 36.61f, 00.00f, 99.24f, 00.00f, 06.95f,
                00.00f, 110.17f, 00.00f, 05.73f, 00.00f, 26.05f, 20.84f, 00.00f, 31.48f, 00.00f, 00.00f, 09.85f, 00.00f, 29.71f, 00.00f, 11.05f, 34.57f, 00.00f, 00.00f, 06.82f,
                00.00f, 02.84f, 22.74f, 00.00f, 06.50f, 00.00f, 00.00f, 19.94f, 00.00f, 06.45f, 00.00f, 29.17f, 00.00f, 12.72f, 27.04f, 00.00f, 00.00f, 04.57f, 00.00f, 04.96f,
                23.20f, 00.00f, 00.00f, 20.72f, 00.00f, 15.44f, 00.00f, 06.99f, 33.32f, 00.00f, 27.00f, 00.00f, 00.00f, 28.46f, 00.00f, 08.02f, 00.00f, 18.12f, 00.00f, 47.34f,
                32.47f, 00.00f, 23.08f, 00.00f, 00.00f, 21.07f, 56.89f, 00.00f, 00.00f, 52.57f, 00.00f, 39.09f, 00.00f, 24.44f,
            };
            Vector3[] jointPositions = {
                new(-21.860f, 4.851f, 9.675f),
                new(-22.000f, 4.850f, 9.665f),
                new(-21.936f, 5.043f, 9.659f),
                new(-21.749f, 4.523f, 9.559f),
                new(-22.086f, 4.500f, 9.762f),
                new(-21.934f, 5.164f, 9.616f),
                new(-21.704f, 4.141f, 9.585f),
                new(-22.109f, 4.148f, 9.918f),
                new(-21.930f, 5.203f, 9.576f),
                new(-21.660f, 4.075f, 9.483f),
                new(-22.163f, 4.084f, 9.819f),
                new(-21.943f, 5.416f, 9.557f),
                new(-21.863f, 5.331f, 9.584f),
                new(-22.015f, 5.321f, 9.568f),
                new(-21.929f, 5.466f, 9.496f),
                new(-21.777f, 5.358f, 9.598f),
                new(-22.106f, 5.325f, 9.540f),
                new(-21.652f, 5.147f, 9.536f),
                new(-22.141f, 5.082f, 9.513f),
                new(-21.698f, 5.258f, 9.331f),
                new(-21.978f, 5.129f, 9.336f),
                new(-21.683f, 5.294f, 9.259f),
                new(-21.930f, 5.149f, 9.273f),
            };
            VerifyModel(instance, blendShapeValues, jointPositions);
        }

        {
            float poseIndexF = 11.5f;
            interpolator.time = poseIndexF / interpolator.fps;
            interpolator.Update();

            float[] blendShapeValues = {
                00.00f, 12.83f, 21.51f, 00.00f, 20.60f, 00.00f, 08.68f, 00.00f, 01.49f, 00.00f, 08.66f, 00.00f, 00.00f, 04.04f, 14.12f, 00.00f, 05.94f, 00.00f, 10.70f, 00.00f,
                00.00f, 01.79f, 08.63f, 00.00f, 00.00f, 16.73f, 00.00f, 01.05f, 00.00f, 08.76f, 40.93f, 00.00f, 18.79f, 00.00f, 00.00f, 40.02f, 00.00f, 10.30f, 00.00f, 02.08f,
                02.57f, 00.00f, 00.00f, 20.14f, 00.00f, 06.11f, 00.00f, 01.67f, 00.00f, 17.15f, 19.37f, 00.00f, 18.02f, 00.00f, 00.00f, 03.56f, 00.00f, 01.45f, 01.44f, 00.00f,
                16.92f, 00.00f, 00.35f, 00.00f, 00.00f, 00.56f, 00.00f, 10.54f, 00.00f, 16.98f, 10.45f, 00.00f, 00.00f, 02.01f, 00.00f, 00.23f, 03.38f, 00.00f, 05.92f, 00.00f,
                00.00f, 00.84f, 00.00f, 07.70f, 00.00f, 38.47f, 00.00f, 06.76f, 38.33f, 00.00f, 00.00f, 07.89f, 00.00f, 00.09f, 02.90f, 00.00f, 00.00f, 02.99f, 00.00f, 03.86f,
                00.00f, 08.44f, 00.00f, 40.02f, 01.58f, 00.00f, 40.10f, 00.00f, 00.00f, 08.41f, 00.00f, 00.40f, 08.40f, 00.00f, 00.00f, 03.01f, 00.00f, 08.23f, 00.00f, 00.49f,
                05.45f, 00.00f, 03.46f, 00.00f, 00.00f, 05.18f, 00.00f, 00.19f, 00.00f, 00.04f, 02.86f, 00.00f, 00.00f, 00.46f, 00.00f, 02.84f, 00.00f, 00.11f, 03.77f, 00.00f,
                00.57f, 00.00f, 00.00f, 03.76f, 00.00f, 00.07f, 00.00f, 13.46f, 00.00f, 30.26f, 00.00f, 39.93f, 30.66f, 00.00f, 00.00f, 04.98f, 00.00f, 05.55f, 39.62f, 00.00f,
                00.00f, 07.44f, 00.00f, 08.49f, 00.00f, 01.30f, 06.45f, 00.00f, 14.72f, 00.00f, 00.00f, 06.00f, 00.00f, 00.24f, 00.00f, 03.46f, 00.00f, 14.91f, 02.53f, 00.00f,
                00.00f, 01.15f, 00.00f, 16.77f, 00.00f, 55.33f, 00.00f, 03.41f, 47.12f, 00.00f, 00.00f, 32.64f, 56.95f, 00.00f, 00.00f, 29.21f, 00.00f, 49.01f, 00.00f, 17.87f,
                00.00f, 17.86f, 27.80f, 00.00f, 49.80f, 00.00f, 00.00f, 35.41f, 00.00f, 06.69f, 06.33f, 00.00f, 00.00f, 44.70f, 00.00f, 22.83f, 00.00f, 13.51f, 00.00f, 05.28f,
                00.91f, 00.00f, 00.00f, 32.05f, 01.94f, 00.00f, 00.00f, 00.39f, 08.57f, 00.00f, 32.01f, 00.00f, 00.00f, 08.74f, 00.00f, 05.66f, 00.00f, 02.74f, 18.00f, 00.00f,
                00.00f, 14.71f, 00.00f, 15.78f, 00.00f, 02.40f, 15.04f, 00.00f, 17.06f, 00.00f, 00.00f, 12.30f, 00.00f, 02.24f, 00.00f, 14.39f, 00.00f, 16.59f, 48.94f, 00.00f,
                12.30f, 00.00f, 00.00f, 01.47f, 11.87f, 00.00f, 00.00f, 50.19f, 00.00f, 04.14f, 00.00f, 13.61f, 00.00f, 00.06f, 00.00f, 02.03f, 02.71f, 00.00f, 02.14f, 00.00f,
                00.00f, 00.10f, 00.00f, 03.93f, 00.00f, 02.63f, 03.99f, 00.00f, 00.00f, 00.11f, 00.00f, 58.98f, 72.91f, 00.00f, 00.00f, 54.78f, 00.00f, 88.02f, 00.00f, 52.62f,
                00.00f, 02.84f, 23.88f, 00.00f, 49.38f, 00.00f, 00.00f, 16.39f, 00.00f, 47.83f, 00.00f, 70.37f, 48.24f, 00.00f, 71.09f, 00.00f, 00.00f, 32.89f, 21.03f, 00.00f,
                00.00f, 47.17f, 23.32f, 00.00f, 00.00f, 14.97f, 00.00f, 117.95f, 00.00f, 39.99f, 00.00f, 89.88f, 07.18f, 00.00f, 00.00f, 09.41f, 00.00f, 41.74f, 98.11f, 00.00f,
                00.00f, 13.95f, 00.00f, 113.39f, 00.00f, 131.00f, 33.59f, 00.00f, 88.94f, 00.00f, 00.00f, 11.80f, 00.00f, 08.53f, 00.00f, 38.66f, 00.00f, 94.34f, 00.00f, 22.48f,
                00.00f, 124.39f, 00.00f, 04.73f, 00.00f, 21.04f, 21.92f, 00.00f, 26.39f, 00.00f, 00.00f, 06.94f, 00.00f, 25.36f, 00.00f, 15.07f, 29.94f, 00.00f, 00.00f, 05.79f,
                00.00f, 09.97f, 42.01f, 00.00f, 00.00f, 11.40f, 00.00f, 43.00f, 00.00f, 18.27f, 00.00f, 38.36f, 00.00f, 06.79f, 39.44f, 00.00f, 00.00f, 08.36f, 00.00f, 14.62f,
                44.02f, 00.00f, 00.00f, 27.81f, 00.00f, 19.77f, 00.00f, 23.18f, 60.90f, 00.00f, 48.17f, 00.00f, 00.00f, 46.49f, 00.00f, 25.72f, 00.00f, 07.46f, 00.00f, 32.07f,
                20.21f, 00.00f, 18.97f, 00.00f, 00.00f, 14.66f, 48.55f, 00.00f, 00.00f, 32.82f, 00.00f, 41.10f, 00.00f, 14.95f,
            };
            Vector3[] jointPositions = {
                new(-21.828f, 4.821f, 9.590f),
                new(-21.944f, 4.812f, 9.512f),
                new(-21.899f, 5.009f, 9.541f),
                new(-21.747f, 4.474f, 9.505f),
                new(-22.023f, 4.458f, 9.597f),
                new(-21.890f, 5.134f, 9.521f),
                new(-21.786f, 4.095f, 9.564f),
                new(-22.125f, 4.187f, 9.852f),
                new(-21.866f, 5.179f, 9.497f),
                new(-21.718f, 4.036f, 9.472f),
                new(-22.163f, 4.080f, 9.790f),
                new(-21.872f, 5.393f, 9.513f),
                new(-21.827f, 5.298f, 9.570f),
                new(-21.929f, 5.304f, 9.456f),
                new(-21.837f, 5.452f, 9.471f),
                new(-21.765f, 5.310f, 9.636f),
                new(-21.954f, 5.322f, 9.366f),
                new(-21.704f, 5.065f, 9.650f),
                new(-21.887f, 5.111f, 9.256f),
                new(-21.658f, 5.138f, 9.428f),
                new(-21.696f, 5.250f, 9.323f),
                new(-21.616f, 5.149f, 9.359f),
                new(-21.642f, 5.310f, 9.319f),
            };
            VerifyModel(instance, blendShapeValues, jointPositions);
        }

        // TODO Get all the joints in the model and verify their worldPosition *and* worldRotation.
    }


    [Test]
    public void TestAverageAndAnimation()
    {
        TestAverageInstantiator();
        TestAnimationInstantiator();
    }
}

